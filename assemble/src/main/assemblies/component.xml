<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<component xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/component/1.1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/component/1.1.2 http://maven.apache.org/xsd/component-1.1.2.xsd">
  <dependencySets>
    <dependencySet>
      <outputDirectory>lib</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <useProjectArtifact>false</useProjectArtifact>
      <outputFileNameMapping>${artifact.artifactId}${dashClassifier?}.${artifact.extension}</outputFileNameMapping>
      <useTransitiveDependencies>false</useTransitiveDependencies>
      <includes>
        <include>${groupId}:${artifactId}-*</include>
        <include>ch.qos.logback:logback-classic</include>
        <include>ch.qos.logback:logback-core</include>
        <include>com.beust:jcommander</include>
        <include>com.codahale.metrics:metrics-annotation</include>
        <include>com.codahale.metrics:metrics-core</include>
        <include>com.codahale.metrics:metrics-healthchecks</include>
        <include>com.codahale.metrics:metrics-jersey</include>
        <include>com.codahale.metrics:metrics-jetty9</include>
        <include>com.codahale.metrics:metrics-json</include>
        <include>com.codahale.metrics:metrics-jvm</include>
        <include>com.codahale.metrics:metrics-logback</include>
        <include>com.codahale.metrics:metrics-servlets</include>
        <include>com.fasterxml.jackson.core:jackson-annotations</include>
        <include>com.fasterxml.jackson.core:jackson-core</include>
        <include>com.fasterxml.jackson.core:jackson-databind</include>
        <include>com.fasterxml.jackson.dataformat:jackson-dataformat-yaml</include>
        <include>com.fasterxml.jackson.datatype:jackson-datatype-guava</include>
        <include>com.fasterxml.jackson.datatype:jackson-datatype-joda</include>
        <include>com.fasterxml.jackson.jaxrs:jackson-jaxrs-base</include>
        <include>com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider</include>
        <include>com.fasterxml.jackson.module:jackson-module-afterburner</include>
        <include>com.fasterxml.jackson.module:jackson-module-jaxb-annotations</include>
        <include>com.fasterxml:classmate</include>
        <include>com.google.code.gson:gson</include>
        <include>com.google.guava:guava</include>
        <include>com.google.protobuf:protobuf-java</include>
        <include>com.sun.jersey:jersey-core</include>
        <include>com.sun.jersey:jersey-server</include>
        <include>com.sun.jersey:jersey-servlet</include>
        <include>io.dropwizard:dropwizard-configuration</include>
        <include>io.dropwizard:dropwizard-core</include>
        <include>io.dropwizard:dropwizard-jackson</include>
        <include>io.dropwizard:dropwizard-jersey</include>
        <include>io.dropwizard:dropwizard-jetty</include>
        <include>io.dropwizard:dropwizard-lifecycle</include>
        <include>io.dropwizard:dropwizard-logging</include>
        <include>io.dropwizard:dropwizard-metrics</include>
        <include>io.dropwizard:dropwizard-servlets</include>
        <include>io.dropwizard:dropwizard-util</include>
        <include>io.dropwizard:dropwizard-validation</include>
        <include>javax.el:javax.el-api</include>
        <include>javax.servlet:javax.servlet-api</include>
        <include>javax.validation:validation-api</include>
        <include>jline:jline</include>
        <include>joda-time:joda-time</include>
        <include>net.sourceforge.argparse4j:argparse4j</include>
        <include>org.apache.commons:commons-math</include>
        <include>org.apache.commons:commons-vfs2</include>
        <include>org.apache.thrift:libthrift</include>
        <include>org.eclipse.jetty.orbit:javax.servlet</include>
        <include>org.eclipse.jetty.toolchain.setuid:jetty-setuid-java</include>
        <include>org.eclipse.jetty:jetty-http</include>
        <include>org.eclipse.jetty:jetty-io</include>
        <include>org.eclipse.jetty:jetty-security</include>
        <include>org.eclipse.jetty:jetty-server</include>
        <include>org.eclipse.jetty:jetty-servlet</include>
        <include>org.eclipse.jetty:jetty-servlets</include>
        <include>org.eclipse.jetty:jetty-util</include>
        <include>org.glassfish.web:javax.el</include>
        <include>org.hibernate:hibernate-validator</include>
        <include>org.jboss.logging:jboss-logging</include>
        <include>org.slf4j:jul-to-slf4j</include>
        <include>org.slf4j:slf4j-api</include>
        <include>org.slf4j:slf4j-log4j12</include>
      </includes>
      <excludes>
        <exclude>${groupId}:${artifactId}-docs</exclude>
      </excludes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>lib</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <outputFileNameMapping>${artifact.artifactId}${dashClassifier?}.${artifact.extension}</outputFileNameMapping>
      <useTransitiveDependencies>true</useTransitiveDependencies>
      <useTransitiveFiltering>false</useTransitiveFiltering>
      <includes>
        <include>io.dropwizard:dropwizard-core</include>
      </includes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>docs</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <useProjectArtifact>false</useProjectArtifact>
      <outputFileNameMapping>${artifactId}_user_manual.${artifact.extension}</outputFileNameMapping>
      <useTransitiveDependencies>false</useTransitiveDependencies>
      <includes>
        <include>${groupId}:${artifactId}-docs:html:user-manual</include>
      </includes>
    </dependencySet>
  </dependencySets>
  <fileSets>
    <fileSet>
      <directory>bin</directory>
      <directoryMode>0755</directoryMode>
      <fileMode>0755</fileMode>
    </fileSet>
    <fileSet>
      <directory>../examples/simple</directory>
      <outputDirectory>/examples/simple</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <includes>
        <include>src/main/**</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>./</directory>
      <outputDirectory>/lib/ext</outputDirectory>
      <directoryMode>0755</directoryMode>
      <excludes>
        <exclude>*/**</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <directory>./</directory>
      <outputDirectory>/logs</outputDirectory>
      <directoryMode>0700</directoryMode>
      <excludes>
        <exclude>*/**</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <directory>../docs/src/main/resources</directory>
      <outputDirectory>/docs</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <includes>
        <include>*.html</include>
        <include>*.css</include>
        <include>examples/*</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>../docs/target</directory>
      <outputDirectory>/docs</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <includes>
        <include>config.html</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>conf</directory>
      <directoryMode>0755</directoryMode>
      <fileMode>0755</fileMode>
      <includes>
        <include>**/*.sh</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>conf</directory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <excludes>
        <exclude>**/*.sh</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <!-- preserve old behavior of extra copy in conf -->
      <directory>conf/templates</directory>
      <outputDirectory>/conf</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <includes>
        <include>accumulo.policy.example</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>target/example-configs</directory>
      <outputDirectory>/conf/examples</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0755</fileMode>
      <includes>
        <include>**/*.sh</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>target/example-configs</directory>
      <outputDirectory>/conf/examples</outputDirectory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <excludes>
        <exclude>**/*.sh</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <directory>../test</directory>
      <directoryMode>0755</directoryMode>
      <fileMode>0755</fileMode>
      <includes>
        <include>**/*.sh</include>
        <include>**/*.py</include>
        <include>**/*.pl</include>
      </includes>
      <excludes>
        <exclude>src/**</exclude>
        <exclude>target/**</exclude>
        <exclude>**/continuous-env.sh</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <directory>../test</directory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <excludes>
        <exclude>**/.*/**</exclude>
        <exclude>pom.xml</exclude>
        <exclude>src/**</exclude>
        <exclude>target/**</exclude>
        <exclude>**/*.sh</exclude>
        <exclude>**/*.py</exclude>
        <exclude>**/*.pl</exclude>
        <exclude>**/*.pyc</exclude>
        <exclude>**/*.pyo</exclude>
        <exclude>**/walkers.txt</exclude>
        <exclude>**/ingesters.txt</exclude>
        <exclude>**/randomwalk/conf/logger.xml</exclude>
        <exclude>**/randomwalk/conf/randomwalk.conf</exclude>
        <exclude>**/randomwalk/conf/walkers</exclude>
      </excludes>
    </fileSet>
    <!-- Lift generated thrift proxy code into its own directory -->
    <fileSet>
      <directory>../proxy/target</directory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <outputDirectory>proxy/thrift</outputDirectory>
      <includes>
        <include>gen-cpp/**</include>
        <include>gen-py/**</include>
        <include>gen-rb/**</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>../proxy</directory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <includes>
        <include>README</include>
        <include>proxy.properties</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>../proxy/examples</directory>
      <directoryMode>0755</directoryMode>
      <fileMode>0755</fileMode>
      <includes>
        <include>**/*.py</include>
        <include>**/*.rb</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>../proxy/examples</directory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <excludes>
        <exclude>**/*.py</exclude>
        <exclude>**/*.rb</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <directory>../proxy/src/main/thrift</directory>
      <directoryMode>0755</directoryMode>
      <fileMode>0644</fileMode>
      <outputDirectory>proxy/thrift</outputDirectory>
      <includes>
        <include>*.thrift</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>../</directory>
      <fileMode>0644</fileMode>
      <includes>
        <include>CHANGES</include>
        <include>LICENSE</include>
        <include>NOTICE</include>
        <include>README</include>
      </includes>
    </fileSet>
  </fileSets>
</component>
